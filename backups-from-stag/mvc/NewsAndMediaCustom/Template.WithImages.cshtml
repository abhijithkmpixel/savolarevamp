@using Telerik.Sitefinity.Frontend.Mvc.Helpers
@using Telerik.Sitefinity.UI.MVC
@model SitefinityWebApp.Mvc.Models.NiewAndMediaViewModel
<section class="page-section news-and-media">
    <h2 class="from-h1 page-section-title h2 center">@Html.Resource("LatestNewsAndMedia")</h2><div class="container">
                                                                                          <div class="text-center padding-bottom">
                                                                                              @using (Html.BeginFormSitefinity("", "news-and-media", FormMethod.Post, new { id = "news-and-media-form" }))
                                                                                              {
                                                                                                  <input type="hidden" name="Api" value="/api/newsandmedias" />
                                                                                                  <input type="hidden" name="Culture" value="@System.Threading.Thread.CurrentThread.CurrentCulture.Name" />
                                                                                                  
                                                                                                  <input type="hidden" name="page" id="news-and-media-page" value="1" /><ul class="list-inline list-small">
                                                                                                      <li>

                                                                                                          <label for="category-filter" class="visually-hidden">@Html.Resource("Category", "Labels")</label>
                                                                                                          <select class="margin-right" name="Category" id="category-filter">
                                                                                                              <option value="">@Html.Resource("Category", "Labels")</option>
                                                                                                              @foreach (var c in Model.Categories)
                                                                                                              {
                                                                                                                  <option value="@c.Value">@c.Text</option>

                                                                                                              }
                                                                                                          </select>
                                                                                                      </li>
                                                                                                      <li>
                                                                                                          <label for="year-filter" class="visually-hidden">@Html.Resource("Year", "Labels")</label>
                                                                                                          <select name="Year" id="year-filter">
                                                                                                              <option value="">@Html.Resource("Year", "Labels")</option>
                                                                                                              @foreach (var c in Model.Years)
                                                                                                              {
                                                                                                                  <option value="@c.Value">@c.Text</option>

                                                                                                              }
                                                                                                          </select>
                                                                                                      </li>
                                                                                                  </ul>

                                                                                              }

                                                                                          </div><div id="news-holder">
            @foreach (var newsBlock in Model.News)
            {
                <div class="row margin-bottom news-row">
                    @foreach (var news in newsBlock)
                    {

                        <div class="col-sm-3" id="@news.Id">
                            <div class="body-small">
                                <ul class="list-span"><li><date>@news.DateStr</date></li><li class="align-right">@news.CategoriesStr</li></ul><img src="@news.Image" class="img-responsive margin-xs-bottom"><p><strong>@news.Title</strong></p><p>@news.Summary</p><div class="align-right">
                                    <a href="@news.Url" class="link-green">
                                        @Html.Resource("Read") <span class="icon-doc-text"></span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    }
                </div>

            }
            <div class="loader"></div>
        </div>
    </div>
    @if (Model.Total > 8)
    {
        <div class="container text-center margin-l-top"><a href="#" class="btn btn-default" id="news-and-media-load-more-btn" data-total="@Model.Total">@Html.Resource("LoadMore")</a></div>
    }

</section>
